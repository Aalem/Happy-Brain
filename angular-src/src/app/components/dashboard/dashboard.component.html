<div class="center-me" *ngIf="!isDataLoaded">
    <mat-progress-spinner style="margin-top: -100px"
                          color="primary"
                          mode="indeterminate">
    </mat-progress-spinner>
</div>

<div *ngIf="isDataLoaded" style="width: 100%;">
    <mat-tab-group color="accent" mat-align-tabs="center">
        <mat-tab label="Pending Students">
            <div *ngIf="hasStudents" style="margin: 15px">
                <mat-form-field>
                    <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
                </mat-form-field>

                <div class="mat-elevation-z8">
                    <table mat-table [dataSource]="dataSource" matSort>

                        <!-- Number Column -->
                        <ng-container matColumnDef="id">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> No.</th>
                            <td mat-cell *matCellDef="let row"> {{row.id+1}}</td>
                        </ng-container>

                        <!-- Name Column -->
                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Name</th>
                            <td mat-cell *matCellDef="let row">
                                <button mat-button (click)="openDialog(row.student)">{{row.name}}</button>
                            </td>
                        </ng-container>

                        <!-- Phone Column -->
                        <ng-container matColumnDef="phone">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Phone</th>
                            <td mat-cell *matCellDef="let row"> {{row.phone}}</td>
                        </ng-container>
                        <!-- Country Column -->
                        <ng-container matColumnDef="country">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Country</th>
                            <td mat-cell *matCellDef="let row"> {{row.country}}</td>
                        </ng-container>
                        <!-- Subject Column -->
                        <ng-container matColumnDef="subject">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Subject</th>
                            <td mat-cell *matCellDef="let row">{{row.subject_name}}</td>
                        </ng-container>

                        <!-- Delete Column -->
                        <ng-container matColumnDef="assign">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Assign Mentor</th>
                            <td mat-cell *matCellDef="let row">
                                <button mat-button color="primary" (click)="assignMentor(row.id)">Assign</button>
                            </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;">
                        </tr>
                    </table>


                    <mat-paginator [pageSizeOptions]="[10, 25, 100]"></mat-paginator>
                </div>
            </div>
            <mat-label *ngIf="!hasStudents"><i>There are no students waiting to be assigned a mentor!</i></mat-label>
        </mat-tab>
        <mat-tab label="Classes">
            <div *ngIf="hasStudents2" style="margin: 15px">
                <button style="float: right" mat-raised-button color="primary" (click)="exportAsXLSX()">Export to
                    Excel
                </button>
                <mat-form-field>
                    <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
                </mat-form-field>

                <div class="mat-elevation-z8">
                    <table mat-table [dataSource]="dataSource2" matSort>

                        <!-- Number Column -->
                        <ng-container matColumnDef="id">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> No.</th>
                            <td mat-cell *matCellDef="let row"> {{row.id+1}}</td>
                        </ng-container>

                        <!-- Name Column -->
                        <ng-container matColumnDef="student">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Student</th>
                            <td mat-cell *matCellDef="let row">
                                <button mat-button (click)="openDialog(row.student)">{{row.student.name}}</button>
                            </td>
                        </ng-container>

                        <!-- Phone Column -->
                        <ng-container matColumnDef="mentor">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Mentor</th>
                            <td mat-cell *matCellDef="let row">
                                <button mat-button (click)="openDialogMentor(row.mentor)">{{row.mentor.name}}</button>
                            </td>
                        </ng-container>

                        <!-- Subject Column -->
                        <ng-container matColumnDef="subject">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Subject</th>
                            <td mat-cell *matCellDef="let row">{{row.subject_name}}</td>
                        </ng-container>

                        <!-- Country Column -->
                        <ng-container matColumnDef="start_date">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Start Date</th>
                            <td mat-cell *matCellDef="let row"> {{row.start_date}}</td>
                        </ng-container>


                        <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns2;">
                        </tr>
                    </table>


                    <mat-paginator [pageSizeOptions]="[10, 25, 100]"></mat-paginator>
                </div>
            </div>
            <div *ngIf="!hasStudents2" >
                <br/>
                <mat-label><i>There are no students waiting to be assigned a mentor!</i></mat-label>
            </div>
        </mat-tab>
    </mat-tab-group>


</div>